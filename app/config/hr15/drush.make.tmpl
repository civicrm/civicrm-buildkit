; A drush makefile for CiviCRM.
; Call using:
; drush make --working-copy civicrm.make

; drush make API version
api = 2

; Drupal core
core = %%CMS_VERSION%%

; ****************************************
; Drupal core
; ****************************************

projects[] = drupal

; ****************************************
; CiviCRM core
; ****************************************

; IMPORTANT: replace "github.com/civicrm" by your own fork of CiviCRM.
; This will make it easier to submit pull-requests for patches.
; see: http://wiki.civicrm.org/confluence/display/CRMDOC/Github+for+CiviCRM

libraries[civicrmdrupal][destination] = modules
libraries[civicrmdrupal][directory_name] = civicrm/drupal
libraries[civicrmdrupal][download][type] = git
libraries[civicrmdrupal][download][url] = %%CACHE_DIR%%/civicrm/civicrm-drupal.git
libraries[civicrmdrupal][download][branch] = 7.x-%%CIVI_VERSION%%
libraries[civicrmdrupal][overwrite] = TRUE

; Backport patch from https://issues.civicrm.org/jira/browse/CRM-16461 (add bash check only if CIVI_VERSION = 4.5)
libraries[civicrmdrupal][patch][] = "https://raw.githubusercontent.com/compucorp/civihr-employee-portal/master/patches/CRM-16461.patch"

libraries[civicrmpackages][destination] = modules
libraries[civicrmpackages][directory_name] = civicrm/packages
libraries[civicrmpackages][download][type] = git
libraries[civicrmpackages][download][url] = %%CACHE_DIR%%/civicrm/civicrm-packages.git
libraries[civicrmpackages][download][branch] = %%CIVI_VERSION%%
libraries[civicrmpackages][overwrite] = TRUE

libraries[civihr][destination] = modules
libraries[civihr][directory_name] = civicrm/tools/extensions/civihr
libraries[civihr][download][type] = git
libraries[civihr][download][url] = %%CACHE_DIR%%/civicrm/civihr.git
libraries[civihr][download][branch] = %%HR_VERSION%%
libraries[civihr][overwrite] = TRUE

; Download available l10n releases (may be outdated)
; libraries[civicrm_l10n][destination] = modules
; libraries[civicrm_l10n][directory_name] = civicrm/l10n/fr_CA/LC_MESSAGES/
; libraries[civicrm_l10n][download][type] = get
; libraries[civicrm_l10n][download][url] = "https://raw.github.com/civicrm/l10n/master/po/fr_CA/civicrm.mo"
; libraries[civicrm_l10n][overwrite] = TRUE

; Overwrite .mo files with latest version from SVN
; libraries[civicrm_l10n_latest][destination] = modules
; libraries[civicrm_l10n_latest][directory_name] = civicrm/l10n
; libraries[civicrm_l10n_latest][download][type] = svn
; libraries[civicrm_l10n_latest][download][url] = http://svn.civicrm.org/l10n/trunk/
; libraries[civicrm_l10n_latest][overwrite] = TRUE

libraries[civicrm][destination] = modules
libraries[civicrm][directory_name] = civicrm
libraries[civicrm][download][type] = git
libraries[civicrm][download][url] = %%CACHE_DIR%%/civicrm/civicrm-core.git
libraries[civicrm][download][branch] = %%CIVI_VERSION%%
libraries[civicrm][overwrite] = TRUE

; ****************************************
; Runtime Modules
; ****************************************

projects[civicrm_error][subdir] = contrib
projects[civicrm_error][version] = 2.0-rc3


projects[libraries][subdir] = contrib
projects[libraries][version] = 2.2

projects[redirect][subdir] = contrib
projects[redirect][version] = 1.0-rc1

projects[webform][subdir] = contrib
projects[webform][version] = 4.4

projects[webform_civicrm][subdir] = contrib
projects[webform_civicrm][version] = 4.10

projects[views][subdir] = contrib
projects[views][version] = 3.11
projects[views][patch][] = "https://www.drupal.org/files/issues/views-exposed_forms_ajax_support-1183418-73.patch"
projects[views][patch][] = "https://www.drupal.org/files/issues/views-exposed-ajax-not-working-2425099-52.patch"

projects[login_destination][subdir] = contrib
projects[login_destination][version] = "1.1"

projects[userprotect][subdir] = contrib
projects[userprotect][version] = "1.1"

; ****************************************
; Developer modules
; ****************************************

projects[devel][subdir] = contrib
projects[devel][version] = 1.5

libraries[civicrmdeveloper][destination] = modules
libraries[civicrmdeveloper][directory_name] = contrib/civicrm_developer
libraries[civicrmdeveloper][download][type] = git
libraries[civicrmdeveloper][download][url] = %%CACHE_DIR%%/eileenmcnaughton/civicrm_developer.git
libraries[civicrmdeveloper][download][branch] = master
libraries[civicrmdeveloper][overwrite] = TRUE

; ****************************************
; Compucorp contrib modules
; ****************************************

projects[ctools][subdir] = civihr-contrib-required
projects[ctools][version] = "1.9"

projects[date][subdir] = civihr-contrib-required
projects[date][version] = "2.8"

projects[entity][subdir] = civihr-contrib-required
projects[entity][version] = "1.6"

projects[civicrm_entity][subdir] = civihr-contrib-required
projects[civicrm_entity][version] = "2.x-dev"

projects[features][subdir] = civihr-contrib-required
projects[features][version] = "2.3"

projects[jquery_update][subdir] = civihr-contrib-required
projects[jquery_update][version] = "2.5"

projects[panels][subdir] = civihr-contrib-required
projects[panels][version] = "3.5"

projects[rules][subdir] = civihr-contrib-required
projects[rules][version] = "2.8"

projects[tipsy][subdir] = civihr-contrib-required
projects[tipsy][version] = "1.0-rc1"

projects[strongarm][subdir] = civihr-contrib-required
projects[strongarm][version] = "2.0"

projects[views_block_area][subdir] = civihr-contrib-required
projects[views_block_area][version] = "1.1"

projects[views_tooltip][subdir] = civihr-contrib-required
projects[views_tooltip][version] = "1.x-dev"

projects[xautoload][subdir] = civihr-contrib-required
projects[xautoload][version] = "5.1"

projects[radix_layouts][subdir] = civihr-contrib-required
projects[radix_layouts][version] = "3.3"

projects[front][subdir] = civihr-contrib-required
projects[front][version] = "2.4"

projects[uuid][subdir] = civihr-contrib-required
projects[uuid][version] = "1.0-alpha6"

projects[node_export][subdir] = civihr-contrib-required
projects[node_export][version] = "3.0"

projects[fancy_login][subdir] = civihr-contrib-required
projects[fancy_login][version] = "3.0-beta6"

projects[jcarousel][subdir] = civihr-contrib-required
projects[jcarousel][version] = "2.7"

projects[download][subdir] = civihr-contrib-required
projects[download][version] = "2.5"

projects[views_fieldsets][subdir] = civihr-contrib-required
projects[views_fieldsets][version] = "1.2"

projects[options_element][subdir] = civihr-contrib-required
projects[options_element][version] = "1.12"

projects[views_datasource][subdir] = civihr-contrib-required
projects[views_datasource][version] = "1.0-alpha2"

projects[mimemail][subdir] = civihr-contrib-required
projects[mimemail][version] = "1.0-beta3"

projects[mailsystem][subdir] = civihr-contrib-required
projects[mailsystem][version] = "2.34"

projects[views_autocomplete_filters][subdir] = civihr-contrib-required
projects[views_autocomplete_filters][version] = "1.2"

projects[views_merge_rows][subdir] = civihr-contrib-required
projects[views_merge_rows][version] = "1.0-rc1"

projects[role_export][subdir] = civihr-contrib-required
projects[role_export][version] = "1.0"

projects[administerusersbyrole][subdir] = civihr-contrib-required
projects[administerusersbyrole][version] = "2.0-rc1"

projects[taxonomy_access_fix][subdir] = civihr-contrib-required
projects[taxonomy_access_fix][version] = "2.2"

projects[chain_menu_access][subdir] = civihr-contrib-required
projects[chain_menu_access][version] = "2.0"

projects[role_delegation][subdir] = civihr-contrib-required
projects[role_delegation][version] = "1.1"

projects[views_json_query][subdir] = civihr-contrib-required
projects[views_json_query][version] = 1.x-dev
projects[views_json_query][download][type] = "git"
projects[views_json_query][patch][] = "https://raw.githubusercontent.com/compucorp/civihr-employee-portal/master/patches/views_json_query_civihr-v1.patch"

projects[views_data_export][subdir] = civihr-contrib-required
projects[views_data_export][version] = 3.0-beta8

projects[views_bulk_operations][subdir] = civihr-contrib-required 
projects[views_bulk_operations][version] = 3.3

; ****************************************
; Compucorp custom drupal modules
; ****************************************

libraries[civihr_employee_portal][destination] = modules
libraries[civihr_employee_portal][directory_name] = civihr-custom
libraries[civihr_employee_portal][download][type] = git
libraries[civihr_employee_portal][download][url] = https://github.com/compucorp/civihr-employee-portal
libraries[civihr_employee_portal][download][branch] = master
libraries[civihr_employee_portal][overwrite] = TRUE

; ****************************************
; Compucorp custom drupal theme
; ****************************************

; Download Radix base theme
projects[radix][version] = "3.0-rc2"

; CiviHR Radix based default subtheme (dependent on the Radix theme)
libraries[civihr_employee_portal_theme][destination] = themes
libraries[civihr_employee_portal_theme][download][type] = git
libraries[civihr_employee_portal_theme][download][url] = https://github.com/compucorp/civihr-employee-portal-theme
libraries[civihr_employee_portal_theme][download][branch] = master
libraries[civihr_employee_portal_theme][overwrite] = TRUE

; ****************************************
; Compucorp custom civicrm modules (not required anymore as the extensions are moved to civihr repo)
; ****************************************

; libraries[civihr_compucorp][destination] = modules/civicrm/tools/extensions
; libraries[civihr_compucorp][download][type] = git
; libraries[civihr_compucorp][download][url] = https://github.com/compucorp/civihr-custom-civi-extensions
; libraries[civihr_compucorp][download][branch] = master
; libraries[civihr_compucorp][overwrite] = TRUE

libraries[civihr_tasks][destination] = modules/civicrm/tools/extensions
libraries[civihr_tasks][download][type] = git
libraries[civihr_tasks][download][url] = https://github.com/compucorp/civihr-tasks-assignments
libraries[civihr_tasks][download][branch] = master
libraries[civihr_tasks][overwrite] = TRUE

; ****************************************
; Compucorp custom libraries for Drupal
; ****************************************

libraries[pclzip][destination] = libraries
libraries[pclzip][download][type] = git
libraries[pclzip][download][url] = https://github.com/ivanlanin/pclzip
libraries[pclzip][download][branch] = master
libraries[pclzip][overwrite] = TRUE